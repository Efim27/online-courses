title = "Подробнее о курсе"
url = "/courses/about/:slug"
layout = "main"
is_hidden = 0

[builderDetails]
modelClass = "Hima\Courses\Models\Course"
identifierValue = "{{ :slug }}"
modelKeyColumn = "slug"
displayColumn = "info"
notFoundMessage = "Курс не найден"

[YandexKassa]
course_slug = "{{ :slug }}"
==
{% set record = builderDetails.record %}
<div class="main__inner">
	<div class="main__left"></div>
	<div class="main__content">
		<div class="about-course-page">
			{% component 'builderDetails' %}
			<div class="about-course">
				<span class="about-course__tag-type tag">{{ record.type.name }}</span>
				<div class="about-course__row">
					<div class="about-course__info">
						<div class="about-course__title">{{ record.title }}</div>
						<div class="about-course__about">
							{{ record.preview.about_mini }}
						</div>
						<div class="about-course__tags">
							{% for tag in record.tags %}
								<div class="about-course__tag tag tag_filled">{{ tag.name }}</div>
							{% endfor %}
						</div>
					</div>
					<div class="about-course__svg-btn">
						<div class="about-course__buy-link about-course-buy">
							{% set buy_popup = user ? 'buy-course-link' : 'signin-link' %}
							{% partial 'blocks/btn_submit_link' classes=buy_popup svg_path='assets/images/buy_btn.svg'|theme %}
							<div class="about-course-buy__center">
								<div class="about-course-buy__price">{{ record.price }} руб.</div>
								<div class="about-course-buy__arrow">
									<object
										data="{{ 'assets/images/icons/arrow.svg'|theme }}"
										type="image/svg+xml"
									></object>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="about-course__image" style="background: url({{ record.preview.attachment_big.path }}) no-repeat 50% 40%/cover;"></div>
			</div>
			<div class="course-info">
				<div class="course-info__row">
					<div class="course-info__title">О чем этот курс?</div>
					<div class="course-info__content">
						<div class="course-info__about">{{ record.preview.about|raw }}</div>
						<div class="course-info__video">
							<img src="{{ record.preview.attachment.path }}" alt="Видео">
						</div>
						<div class="course-info__comment">{{ record.preview.video_about }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="main__right"></div>
</div>

{% partial 'blocks/work_examples' add_classes='work-examples-about-course' work_examples=record.preview.work_examples %}

<div class="about-education about-education-about-course">
	<div class="main__inner main__inner_soc-links">
		<div class="main__left">
		</div>
		<div class="main__content">
			<div class="about-education__algorithm algorithm-education">
				<div class="algorithm-education__mini-title">Для кого этот курс</div>
				<div class="algorithm-education__divider-top divider"></div>
				<div class="algorithm-education__row">
					<div class="algorithm-education__title">
						Для кого<br>этот курс
					</div>
					<div class="algorithm-education__stages">
						{% for audience_stage in
						record.preview.audience %}
						<div
							class="algorithm-education__stage algorithm-stage"
						>
							<div class="algorithm-stage__row">
								<div class="algorithm-stage__dot dot"></div>
								<div class="algorithm-stage__label">
									{{ audience_stage.audience_about }}
								</div>
							</div>
							{% if loop.last != true %}
							<div
								class="algorithm-stage__divider divider"
							></div>
							{% endif %}
						</div>
						{% endfor %}
					</div>
				</div>
				<div
					class="algorithm-education__divider-bottom divider"
				></div>
			</div>
		</div>
		<div class="main__right"></div>
	</div>
</div>

{% partial 'blocks/creative_result' classes='creative-result-about-course' data=record.preview %}
{% partial 'blocks/work_materials' add_classes='work-materials-about-course' materials=record.preview.materials %}
{# {% partial 'blocks/project_authors' classes='project-authors-block-about-course' project_authors=record.preview.authors %} #}

<div class="course-scheme">
	<div class="main__inner">
		<div class="main__left"></div>
		<div class="main__content">
			<div class="course-scheme__divider divider divider_yellow"></div>
			<div class="course-scheme__row">
				<div class="course-scheme__title">Программа курса</div>
				<div class="course-scheme__stages">
					{% for course_block in record.blocks %}
						{% set lessons_count = course_block.lessons|length %}
						{% set lesson_label = tools.plural_form(lessons_count, ['урок', 'урока', 'уроков']) %}
						{% set lesson_text = lessons_count ~ ' ' ~ lesson_label %}
						{% partial 'blocks/course_stage' classes="course-scheme__stage" course_block=course_block lessons=lesson_text last="true" %}
					{% endfor %}
				</div>
			</div>
			<div class="course-scheme__divider divider divider_yellow"></div>
		</div>
		<div class="main__right"></div>
	</div>
</div>
{% partial 'blocks/faq' data=record.preview.faq %}
{% partial 'popups/buy_course' data=record %}